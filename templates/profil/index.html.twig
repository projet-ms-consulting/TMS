{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
    <div class="profile-page">
        <h1 class="profile-title">Mon Profil</h1>

        <a href="{{ path('app_profil_edit') }}" class="btn btn-primary edit-profile-btn">Modifier mon profil</a>

        <p class="profile-info">Nom    : {{ person.lastName }}</p>
        <p class="profile-info">Prenom : {{ person.firstName }}</p>
        <p class="profile-info">Email  : {{ user.email }}</p>

        <ul>
            {% for file in person.files %}
                <li>
                    <a href="{{ asset('assets/FilesDirectory/' ~ file.file) }}" target="_blank" class="file-link">{{ file.realFileName }}</a>
                    - <span class="file-label">{{ file.label == 'Autre document' ? 'Autre document' : file.label }}</span>

                    {% if file.file is not null and file.realFileName is not null %}
                        {% set extension = file.file|split('.')|last|lower %}
                        {% if extension in ['jpg', 'jpeg', 'png', 'gif'] %}
                            <br>
                            <img src="{{ asset('assets/FilesDirectory/' ~ file.file) }}" alt="Miniature CV" style="max-width: 200px;">
                        {% endif %}
                    {% endif %}

                    <a href="{{ path('app_delete_cv', {'id': file.id}) }}" class="btn btn-danger delete-cv-btn"
                       onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce fichier ?')">Supprimer</a>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}